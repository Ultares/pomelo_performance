package protocol;
import "Common.proto";
import "Card.proto";
import "PlayerBasic.proto";

message StGameData
{
	optional int32 instance_id = 1;
	optional int32 limit_num = 2; //-1无次数限制 x:还剩余x次
	optional int32 type = 3;
}

message StarGameInfo 
{
	repeated StGameData instances = 1; //试练记录
	optional int32 last_instance_id = 2; //上一次参加的试练
	optional uint32 next_flush_times = 3;//下次刷新时间
}

message C2S_GetStarGameRequest
{
}

message S2C_GetStarGameResponse
{
	optional StarGameInfo instance_info = 1;
}

message S2C_UpdateStarGameInfo
{
	optional StarGameInfo instance_info = 1;
}

message C2S_EnterStarGameRequest
{
	required int32 instance_id = 1;
}

message S2C_EnterStarGameResponse
{
	required int32 res = 1; //0成功进入 x失败原因
}

message S2C_StarGameFinishResponse
{
	required int32 res = 1; //0成功 x失败原因
	repeated IntPair reward_items = 2; //道具奖励
	repeated Card old_cards = 3;
	repeated Card new_cards = 4;
	optional BasicInfo old_basic_info = 5;
	optional BasicInfo new_basic_info = 6;
	repeated Resource old_resources = 7;
	repeated Resource new_resources = 8;
	//optional bool win = 9;
	optional bool is_win = 10;
}

message C2S_SweepStarGameRequest
{
	optional int32 instance_id = 1;
	optional int32 sweep_num = 2;
}

message RewardByStarGameIndex
{
	optional int32 index = 1;
	optional int32 item_id = 2;
	optional int32 count = 3;
}

message S2C_SweepStarGameResponse
{
	required int32 res = 1; //0成功 x失败原因
	repeated RewardByStarGameIndex reward_items = 2; //道具奖励
}