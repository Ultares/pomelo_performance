package protocol;

enum ChatChannelType
{
	ChatChannelType_World = 1;
	ChatChannelType_System = 2;
	ChatChannelType_Guild = 3;
}

message ChatBase
{
	optional bytes chat_str = 1;		//聊天内容
	optional int32 type = 2;			//聊天类型,1文字,2语音,3图片
	optional uint32 index = 3;			//聊天内容的数字顺序标记
	optional uint32 time = 4;			//此消息时间
	optional string name = 5;			//聊天人
	optional uint32 icon_id = 6;		//头像ID
	optional uint32 level = 7;          //俱乐部等级
	optional uint64 player_id = 8;      //玩家ID
	optional uint32 touxiang = 9;
	optional uint32 biankuang = 10;
}

message WorldChatChannel
{
	repeated ChatBase chat_base = 1;	//聊天内容
	optional int32 channel_idx = 2;		//频道ID
	optional int32 player_num = 3;		//当前频道人数
}

message SystemChatChannel
{
	repeated ChatBase chat_base = 1;	//聊天内容
}

message GuildChatChannel
{
	repeated ChatBase chat_base = 1;	//聊天内容
	optional uint64 guild_id = 2;		//应援团ID
	optional int32 channel_idx = 3;		//频道ID
	optional int32 player_num = 4;		//当前频道人数
}

message ChatInfo
{
	optional WorldChatChannel world_channel = 1;
	optional SystemChatChannel system_channel = 2;
	optional GuildChatChannel guild_channel = 3;
}

message C2S_ChatInfoRequest
{
	optional int32 channel_type = 1;
	optional int32 channel_idx = 2;
	optional uint32 last_time = 3;
	optional uint32 index = 4;
}

message S2C_ChatInfoResponse
{
	optional int32 res = 1;
	optional ChatInfo chat_info = 2;
}

message C2S_ChatRequest
{
	optional int32 channel_type = 1;
	optional int32 channel_idx = 2;
	optional ChatBase chat_base = 3;
}

message S2C_ChatResponse
{
	optional int32 res = 1;
}

message C2S_GmSendSystemChat
{
	optional int32 channel_type = 1;
	optional int32 channel_idx = 2;
	optional ChatBase chat_base = 3;
	optional uint32 exist_time = 4;
}