package protocol;
import "Team.proto";
import "Error.proto";

message StrategyEntry {
  optional ECardPosition card_position = 1;                   // 选手位置
  optional int32 radical_level = 2;                           // 激进程度（M_Player_Style.xlsx中的radicalLV）
}

message StrategyPage {
  optional int32 tactic_id = 1;                               // 1. 战术ID
  optional int32 tactic_level = 2;                            // 2. 战术等级
  optional int32 tactic_core = 3;                             // 3. 战术核心ID
  repeated StrategyEntry strategy_entries = 4;                // 4. 各个位置的风格（激进程度）
}

message StrategyInfo {
  repeated StrategyPage pages = 5;                            // 已开启的战术
  optional int32 tactic_id = 6;                               // 正在使用的战术ID
  repeated int32 new_tactics = 7;                             // 未被查看的战术页
}

// 获取战术选择信息
message C2S_StrategyInfoRequest {
}
message S2C_StrategyInfoResponse {
  optional StrategyInfo strategy_info = 1;
}

message S2C_StrategyUnlockTactic {
  optional StrategyPage new_page = 1;
}

// 设置战术信息
message C2S_StrategyTacticRequest {
  optional StrategyPage page = 1;                             // 已开启的战术
}
message S2C_StrategyTacticResponse {
  optional ErrorCode error_code = 1;
}

// 使用战术
message C2S_StrategyTakeRequest {
  optional int32 tactic_id = 1;                               // 需要使用的战术ID
}
message S2C_StrategyTakeResponse {
  optional ErrorCode error_code = 1;
}

// 升级战术
message C2S_StrategyLevelUpRequest {
  optional int32 tactic_id = 1;
}
message S2C_StrategyLevelUpResponse {
  optional ErrorCode error_code = 1;
  optional StrategyPage strategy_page = 2;
}

// 查看战术页
message C2S_StrategyLookRequest {
  optional int32 tactic_id = 1;                               // 查看的战术页在StrategyInfo的new_tactics里时发生这个消息
}
message S2C_StrategyLookResponse {
  optional ErrorCode error_code = 1;
  optional int32 deleted_new_tactics = 2;
}

