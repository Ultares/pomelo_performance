package protocol;
import "PlayerBasic.proto";

enum EAccountFlagType
{
  ACCOUNT_FLAG_TYPE_INVALID = 0;
  ACCOUNT_FLAG_TYPE_REBATE_ACCOUNT = 1;     // 9.1&9.8测试玩家
  ACCOUNT_FLAG_TYPE_REBATE_RECHARGE = 2;    // 9.1测试充值玩家
  ACCOUNT_FLAG_TYPE_REBATE_ACCOUNT_0915 = 4;// 9.15测试10级以上玩家
  ACCOUNT_FLAG_TYPE_REBATE_RECHARGE_0915 = 8;// 9.15测试充值玩家
}

message AccountData
{
	optional string platform_id = 1;
	optional string global_server_id = 2;
	optional uint64 player_id = 3;
	optional BasicInfo basic_info = 4;
}

message AntiAddictionInfo
{
	optional uint32 today_anti_times = 1;//当天防沉迷累计时间
	optional uint32 today_anti_delay = 2;//当天防沉迷惩罚倒计时
	optional uint32 next_anti_day_flush = 3;//防沉迷刷新时间
	optional uint32 last_calc_times = 4;//上一次计算时间
	optional int32 is_adult = 5;
}

message AccountInfo 
{
	optional string account_id = 1;
	optional string platform_session = 2;
	optional uint32 session_valid_times = 3;
	repeated AccountData account_datas = 4;
	optional AntiAddictionInfo anti_addiction_info = 5;//用户防尘迷系统
	optional string imei = 6;
	optional uint64 flags = 7;           // EAccountFlagType标记
}

message S2S_AccountVerifyOkMsg
{
	required string account = 1;
	optional string platform_id = 2;
	optional string global_server_id = 3;
	optional string platform_session = 4;
	optional string game_id = 5;
	optional int32 svnversion = 6;
	optional string appversion = 7;//App版本号
	optional string platform = 8;//平台类型 1.IOS 2.Android 3.WP
	optional string gameRegion = 9;//区服
	optional string channel = 10;//渠道
	optional string accountType = 11;//0.未知 1.自己注册 2.新浪微博用户 3.QQ用户 4.QQ微博 5.91用户
	optional string mac = 12;
	optional string imei = 13;
	optional string resolution = 14;//分辨率
	optional string osVersion = 15;//操作系统版本
	optional string brand = 16;//机型
	optional string ip = 17;
	optional string operators = 18;//运营商
	optional int32 is_reconn = 19;
}

message C2S_XlAccountVerifyRequest
{
	optional S2S_AccountVerifyOkMsg request = 1;
	optional string key = 2;
}

message S2C_AccountVerifyResponse
{
	optional int32 res = 1;
	optional AccountInfo account_info = 2;
	optional int32 svr_svnversion = 3;
}

message S2C_AntiAddictionMsg
{
	optional uint32 today_anti_times = 1;//当天已经累计时间
	optional uint32 today_anti_delay = 2;//当天防沉迷惩罚倒计时
}

message C2S_ReconnectRequest
{
	required S2S_AccountVerifyOkMsg request = 1;
	required int32 current_recv_sn = 2;
}

message S2C_ReconnectResponse
{
	required int32 res = 1;
	optional int32 current_recv_sn = 2;
}

message C2S_MessageRecved
{
	required int32 current_recv_sn = 1;
}

message S2C_MessageRecved
{
	required int32 current_recv_sn = 1;
}

message C2S_SetAdultRequest
{
	repeated int32 is_adult = 1;
	repeated string account = 2;
	repeated int32 level = 3;
	repeated int32 star = 4;
	repeated int32 card_id = 5;
	repeated int32 card_num = 6;
	repeated int32 card_star = 7;
}
