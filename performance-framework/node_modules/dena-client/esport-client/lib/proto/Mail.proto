package protocol;
import "Common.proto"; 
import "Card.proto";
enum MailStatusFlag
{
	MailStatusFlag_UNREAD = 0;	 		//未读取
	MailStatusFlag_READ = 1;			//已读取
	MailStatusFlag_Del = 2;				//已删除
}

enum MailPickType
{
	MailFlagType_None = 0;				//没有附件
	MailFlagType_PICK = 1;				//可领取
	MailFlagType_PICKED	= 2;			//已领取
}

enum MailSourceType
{
	MailSourceType_GM_Single = 1;		//管理员邮件目标发送
	MailSourceType_GM_All = 2;			//管理员邮件全服
	MailSourceType_Player = 3;			//玩家之间
	MailSourceType_System = 4;			//系统功能邮件
}

message	MailContext
{
	optional uint64 mail_id = 1;		//邮件ID
	optional int32 status = 2;			//邮件状态
	optional uint32 send_time = 3;		//发送时间
	optional bytes title = 4;			//标题
	optional bytes description = 5;		//部分展示信息
	optional bytes content = 6;			//内容
	optional bytes from = 7;			//发送者
	optional bytes from_iteamindex = 8;	//玩家的TEAM展示头像
	optional int32 source_type = 9;		//邮件附件来源类型
	repeated string params = 10;		//邮件内特殊描述字段
	repeated IntPair items = 11;		//附件
	optional int32 pick_flag = 12;		//附件领取状态
	optional uint32 delete_time = 13;   //邮件失效时间
	optional int32 config_id = 14;		//系统邮件编号
	repeated Card cards = 15;			//定制卡片
}

message MailInfo
{
	repeated MailContext mails = 1;		//玩家邮件详细信息
	optional int32 new_mail_num = 2;	//新邮件数量 0没有,x:有x新邮件
	optional uint32 last_flush_time = 3;//上次刷新时间
}

// 邮件读取
message C2S_ReadMailRequest
{
    optional int64 mail_id = 1;
}

// 邮件读取结果
message S2C_ReadMailResonse
{
	optional int32 res = 1;
}

// 邮件提取
message C2S_ExtractMailRequest
{
	repeated int64 mail_id = 1;	//0:提取所有邮件,x:提取邮件ID为x的邮件
}

// 邮件提取结果
message S2C_ExtractMailResponse
{
	optional int32 res = 1;
	repeated IntPair items = 2; //购买到的奖励
}

// 邮件删除
message C2S_MailDeleteRequest
{
    repeated int64 mail_id = 1; //0:删除所有邮件,x:删除邮件ID为x的邮件
}

// 邮件删除结果
message S2C_MailDeleteResponse
{
	optional int32 res = 1;
}

// 邮件更新
message S2C_UpdateMailDataMsg
{
	optional int32 new_mail_num = 1;	//新邮件数量 0没有,x:有x新邮件
	optional int32 total_mail_num = 2;
	repeated MailContext mail = 3;
}

// 邮件数据同步请求
message C2S_MailInfoRequest
{

}

// 邮件数据同步
message S2C_MailInfoResponse
{
	optional int32 res = 1;
	repeated MailContext mail_list =2;
	optional int32 total_mail_num = 3;
}

// 发送邮件
message C2S_SendMailRequest
{
	optional int32 res = 1;
    optional int32 mail_type = 2;
    optional string players_str = 3;
    repeated IntPair items = 4;
	optional string title = 5;
    optional bytes mail_context = 6;
	optional bytes mail_description = 7;
}

// 发送邮件返回
message S2C_SendMailResponse
{
	optional int32 res = 1;
}

message C2S_GmSendMailRequest
{
    optional int32 mail_type = 1;
    optional string players_str = 2;
    repeated IntPair items = 3;
	optional string title = 4;
    optional bytes mail_context = 5;
	optional bytes mail_description = 6;
	repeated Card cards = 7;
}