package protocol;
import "Error.proto";
import "Item.proto";

message EventProgressData {
  optional int32 subtask = 1;
  optional int32 progress = 2;
  optional uint64 card_uid = 3;                 // 如果是“将某个选手升级/升星/升阶至X“，表示已记录的选手UID
}

message EventData {
  optional int32 event_id = 1;
  // optional int32 progress = 2;
  optional uint64 timestamp = 3;                // 开始时间
  repeated EventProgressData progress_data = 4; // 进度
  // optional bool finished = 5;                   // 是否完成和给过奖励
}

message EventInfo {
  repeated EventData event_data = 1;            // 当前正在进行的事件任务
  repeated int32 finished_events = 2;
}

// 事件任务
message C2S_EventInfoRequest {
}
message S2C_EventInfoResponse {
  optional EventInfo event_info = 1;
}

// 触发任务、更新任务进度时发送
message S2C_EventDataUpdate {
  optional EventData event_data = 1;
}

// 领取奖励
message C2S_EventRewardRequest {
  optional int32 event_id = 1;
}
message S2C_EventRewardResponse {
  optional ErrorCode error_code = 1;
  optional int32 event_id = 2;
  repeated Item rewards = 3;
}

