package protocol;
import "Error.proto";


message MyCommentInfo {
  optional uint32 card_id = 1;					//卡牌id
  optional uint64 id = 2;						//评论id
  optional bytes comment = 3;					//评论内容
  optional uint32 like_num = 4;					//点赞数
  optional uint32 refresh_time = 5;				//刷新时间
}

message CommentHasLike {
  optional uint64 id = 1;						//评论id
  optional uint32 like_time = 2;				//点赞时间
}

message CardHasLike {
  optional uint32 card_id = 1;					//卡牌id
  repeated CommentHasLike like = 2;				//对该卡牌的点赞
}

message CardCommentInfo {
  repeated MyCommentInfo comments = 1;			//自己的评论
  repeated CardHasLike likes = 2;				//已点赞记录
}

message OneCommentInfo {
  optional uint64 id = 1;					//评论id
  optional string player_name = 2;			//玩家名字
  optional bytes comment = 3;				//评论内容
  optional uint32 like_num = 4;				//点赞数
}

message CommentList {
  repeated OneCommentInfo comments = 1;
}


//请求某卡牌评论
message C2S_CardCommentRequest {
  optional uint32 card_id = 1;
}

//返回卡牌的评论
message S2C_CardCommentResponse {
  optional ErrorCode error_code = 1;
  optional uint32 card_id = 2;
  optional CommentList list = 3;
  optional MyCommentInfo my_comment = 4;
  optional CardHasLike my_like = 5;
  optional uint32 like_refresh_time = 6;
}

//评论卡牌
message C2S_CommentCardRequest {
  optional uint32 card_id = 1;
  optional bytes comment = 2;
}

//评论卡牌返回
message S2C_CommentCardResponse {
  optional ErrorCode error_code = 1;
  optional MyCommentInfo comment = 2;
}

//评论点赞
message C2S_LikeCardCommentRequest {
  optional uint64 id = 1;
  optional uint32 card_id = 2;
}

//返回评论点赞
message S2C_LikeCardCommentReponse {
  optional ErrorCode error_code = 1;
  optional CardHasLike has_like = 2;
}

