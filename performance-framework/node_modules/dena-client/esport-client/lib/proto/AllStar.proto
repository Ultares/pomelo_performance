package protocol;
import "Arena.proto";
import "Error.proto";
import "Item.proto";
import "Strategy.proto";

enum AllStar_ForTune_Type {
  ALLSTAR_FORTUNE_TYPE_FREE_PLAYER = 1;			// 选手免费
  ALLSTAR_FORTUNE_TYPE_ADD_FUND = 2;			//建队资金增加
  ALLSTAR_FORTUNE_TYPE_ADD_TEAM = 3;			// 可使用某队伍
}

enum AllStar_Constant{
	AllStar_Constant_Team_Card = 10000;			//队伍id和卡牌id组合数
	AllStar_Constant_Match_InitSep = 10;		//次数加10，防止空的也返回0
	AllStar_Constant_Ticket_ID = 11023;			//门票道具id
}

message AllStarGotSkill {
  optional uint32 id = 1;						//已选的卡牌
  optional int32 skill1 = 2;					//已随机的技能1
  optional int32 skill2 = 3;					//已随机的技能2
}

message AllStarEffect {
  optional uint32 addFund = 1;					//增加的资金
  optional uint32 freePlayer = 2;				//免费的选手
  optional uint32 addTeam = 3;					//可使用的队伍
}

message AllStarInfo {
  optional uint32 winTimes = 1;						//本轮胜利次数
  optional uint32 loseTimes = 2;					//本轮失败次数
  optional uint32 fortune = 3;						//运气id
  repeated AllStarGotSkill randomSkills = 4;		//已随机出的技能组
  optional ArenaPlayer teamData = 5;				//保存的队伍信息
  optional AllStarEffect fortuneEffect = 6;			//运气效果
  repeated uint32 team = 7;							//队伍选手
  optional uint64 opp_id = 8;						//对手id
  optional uint64 opp_timestamp = 9;				//选出对手时间
  repeated StrategyPage pages = 10;                 //已开启的战术
  optional StrategyPage select_page = 11;			//选择的战术
}


//请求全明星赛数据
message C2S_AllStarInfoRequest {
}

//返回全明星赛数据
message S2C_AllStarInfoResponse {
  optional AllStarInfo info = 1;
  optional ErrorCode error_code = 2;
}

//开启全明星赛
message C2S_OpenAllStarRequest {
}

//选队员
message C2S_SetTeamAllStarRequest {
  repeated uint32 id = 1;
}

//设置战术
message C2S_SetStrategyAllStarRequest {
  optional StrategyPage page = 1;   
}

//返回设置战术结果
message S2C_SetStrategyAllStarRequest {
   optional StrategyPage page = 1; 
   optional ErrorCode error_code = 2;   
}

//选择战术
message C2S_SelectStrategyAllStarRequest {
  optional int32 id = 1;   
}

//返回选择战术结果
message S2C_SelectStrategyAllStarRequest {
   optional int32 id = 1; 
   optional ErrorCode error_code = 2;   
}

//匹配对手
message C2S_MatchOppAllStarRequest {
}

//返回对手数据
message S2C_MatchOppAllStarInfoResponse {
  optional AllStarInfo info = 1;
  optional ErrorCode error_code = 2;
}

//与对手pk
message C2S_FightOppAllStarRequest {
}

//领取结算奖励
message C2S_GetAllStarAward {
}

//返回结算奖励
message S2C_AllStarAward{
   repeated Item items = 1; 
   optional ErrorCode error_code = 2;
}
