package protocol;
import "Error.proto";

message SkillStatus {
  optional uint32 skill_id = 1;
  optional uint32 research_progress = 2;                                  // 研究进度，>=100时表示可用
  optional uint32 usage_count = 3;                                        // 被多少个选手装备
}

message SkillInfo {
  repeated SkillStatus status_list = 1;                                   // 如果一个技能在这个列表里，那这个技能已解锁；能否装备要看它的研究进度
}

// 请求技能信息
message C2S_SkillInfoRequest {
}
message S2C_SkillInfoResponse {
  optional SkillInfo skill_info = 1;
}

// 更新技能信息
message S2C_SkillStatusUpdate {
  optional SkillStatus skill_status = 1;                                  // 新的skill_id表示新增的技能，旧的skill_id表示更新技能信息；解锁的技能不会被删除
}

// 将选手分解：
//    target_skill=0时表示用来分解成技能经验；
//    否则表示用来解锁或增加target_skill技能的研究进度
message C2S_DecomposeCardRequest {
  repeated uint64 card_uid = 1;
  optional uint32 target_skill = 2;
}
message S2C_DecomposeCardResponse {
  optional ErrorCode error_code = 1;
}

// 装备技能
message C2S_EquipSkillRequest {
  optional uint32 skill_id = 1;
  optional uint64 card_uid = 2;
}
message S2C_EquipSkillResponse {
  optional ErrorCode error_code = 1;
}

// 卸除技能
message C2S_RemoveSkillRequest {
  optional uint64 card_uid = 1;
  optional uint32 skill_id = 2;
}
message S2C_RemoveSkillResponse {
  optional ErrorCode error_code = 1;
}

// 升级技能
message C2S_UpgradeSkillRequest {
  optional uint64 card_uid = 1;
  optional uint32 target_skill = 2;
}
message S2C_UpgradeSkillResponse {
  optional ErrorCode error_code = 1;
}

